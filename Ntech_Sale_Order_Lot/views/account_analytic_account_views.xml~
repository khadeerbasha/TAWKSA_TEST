<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="property_analytic_view_form" model="ir.ui.view">
        <field name="name">account.analytic.account.form</field>
        <field name="model">account.analytic.account</field>
        <field name="inherit_id" ref="property_management.property_analytic_view_form"/>
        <field name="arch" type="xml">
            <xpath expr="//div[hasclass('oe_title')]" position="before">
                <div class="oe_button_box" name="button_box">
                    <button class="oe_stat_button" name="open_entries"  type="object" icon="fa-pencil">
                        <field string="Payments" name="payment_count" widget="statinfo" />
                    </button>
                    <button class="oe_stat_button" name="open_journal_entries"  type="object" icon="fa-bars" attrs="{'invisible': [('account_move_count', '=', 0)]}">
                        <field string="Journal Entries" name="account_move_count" widget="statinfo" />
                    </button>
                </div>
            </xpath>
            <button name="button_set_to_renew" position="after">
                <button name="button_register_payment" string="Register Payment" type="object" class="oe_highlight" colspan="2"/>
            </button>
            
            <button name="button_receive" position="replace">
                <button
                name="button_initial_receive"
                string="Initial Amount Receive"
                type="object"
                states="draft,open,pending"
                icon="fa-money"
                class="oe_highlight"
                attrs="{'invisible':[('is_initial_receive', '=', True)]}"/>
                <button
				name="button_receive"
				string="Insurance Amount Receive"
				type="object"
				states="draft,open,pending"
				icon="fa-money"
				class="oe_highlight"
				attrs="{'invisible':['|', ('is_initial_receive', '=', False),('deposit_received','=',True)]}"
			/>
            </button>
            
            <button name="button_return" position="replace">
                <button
				name="button_return"
				string="Insurance Amount Return"
				type="object"
				states="draft,open,pending"
				icon="fa-undo"
				class="oe_highlight"
				attrs="{'invisible':[('return_deposit','=',True)]}"
				context="{'return':1}"
			/>
            </button>
            <field name="deposit_return" position="attributes">
                <attribute name="invisible">1</attribute>
            </field>
            <field name="deposit_received" position="after">
                <field name="return_deposit" readonly="1"/>
                <field name="is_initial_receive" invisible="1"/>
            </field>
        </field>
    </record>
</odoo>
